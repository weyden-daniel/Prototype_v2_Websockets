<!DOCTYPE html>
<html>
   <head>
      <script type="text/javascript">
         var socket = null;
         var isopen = false;

         window.onload = function() {

            socket = new WebSocket("ws://140.86.39.208:9000");
            socket.binaryType = "arraybuffer";

            socket.onopen = function() {
               console.log("Connected!");
               isopen = true;
            }

            socket.onmessage = function(e) {
               if (typeof e.data == "string") {
                  console.log("Text message received: " + e.data);
               } else {
                  var arr = new Uint8Array(e.data);
                  var hex = '';
                  for (var i = 0; i < arr.length; i++) {
                     hex += ('00' + arr[i].toString(16)).substr(-2);
                  }
                  console.log("Binary message received: " + hex);
               }
            }

            socket.onclose = function(e) {
               console.log("Connection closed.");
               socket = null;
               isopen = false;
            }
         };

         function sendText() {
            if (isopen) {
               socket.send("Hello, world!");
               console.log("Text message sent.");               
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendBinary() {
            if (isopen) {
               var buf = new ArrayBuffer(32);
               var arr = new Uint8Array(buf);
               for (i = 0; i < arr.length; ++i) arr[i] = i;
               socket.send(buf);
               console.log("Binary message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };
                 
    	
		var video = document.querySelector("#videoElement");
				 
		navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;
					 
		if (navigator.getUserMedia) {
		navigator.getUserMedia({video: true}, handleVideo, videoError);
		}
					 
		function handleVideo(stream) {
		video.src = window.URL.createObjectURL(stream);
		}
					 
		function videoError(e){
		// do something
		}
			 
	</script>
      
		<style>
			#container {
				margin: 0px auto;
				width: 500px;
				height: 375px;
				border: 10px #333 solid;
			}
			
			#videoElement {
				width: 500px;
				height: 375px;
				background-color: #666;
			}
		</style>
      
	<title>Face Recognition Demonstration</title>

	</head>
	
	<body>
		<table>
			<tr>
				<td>
					<img src="static/opencv_python_logo.png">
				</td>
				<td>
					<img src="static/oracle_logo.png">
				</td> 		
			</tr>
		</table>
    
		<h1>Face Recognition Demonstration</h1>
		
		<div id="container">
			<video autoplay="true" id="videoElement">
			
			</video>
		</div>
		
		
		<p>Open your browser's JavaScript console to see what's happening (hit F12).</p>
		<button onclick='sendText();'>Send Text Message</button>
		<button onclick='sendBinary();'>Send Binary Message</button>
	</body>
</html>



